# 个人中医养生网站 - 产品需求文档（PRD）

**版本**: v1.1
**创建日期**: 2026年01月30日
**最后更新**: 2026年01月30日
**产品经理**: Lulu
**项目名称**: 个人中医养生

---

## 📋 目录

1. [产品概述](#产品概述)
2. [用户故事](#用户故事)
3. [功能需求](#功能需求)
4. [技术架构](#技术架构)
5. [设计规范](#设计规范)
6. [用户旅程](#用户旅程)
7. [路线图](#路线图)
8. [设计决策记录](#设计决策记录)

---

## 产品概述

### 产品定位
个人中医养生网站是一个基于传统中医理论的个人健康管理工具，通过五行学说、药材知识库、体质辨识等功能，帮助用户了解和应用中医养生智慧。

### 核心价值
- **传承中医文化**: 将传统中医理论以现代化方式呈现
- **个性化养生**: 基于体质和节气提供定制化养生建议
- **知识学习**: 提供《伤寒论》药材等中医知识库
- **健康管理**: 记录和追踪个人健康状态

### 产品哲学
**简单**: 专注核心功能，每个页面只做一件事
**易用**: 纯静态网页，无需注册，即开即用
**美观**: 中国风设计，水墨元素，季节主题

---

## 用户故事

### US-01: 欢迎页
**作为** 新访客
**我想要** 看到一个美观的欢迎页面
**以便** 了解网站的主题并开始探索

**验收标准**:
- [x] 展示中医药主题插画（药罐、药材、秤砣）
- [x] 有清晰的欢迎文字
- [x] 有"开始探索"按钮跳转到主页
- [x] 根据当前季节自动切换主题色

### US-02: 首页
**作为** 用户
**我想要** 看到当前季节的养生信息
**以便** 根据节气调整生活方式

**验收标准**:
- [x] 显示当前季节（春/夏/长夏/秋/冬）
- [x] 展示季节养生原则（春生、夏长等）
- [x] 提供导航到其他功能页面
- [x] 支持手动切换季节主题

### US-03: 五行学说
**作为** 中医学习者
**我想要** 交互式地学习五行理论
**以便** 理解五行与人体、自然的关系

**验收标准**:
- [x] 五行元素（木火土金水）圆形布局展示，缓慢旋转（60秒/圈）
- [x] 相生相克关系可视化（虚线圆圈+五角星形连接）
- [x] 中心提示按钮引导用户点击元素
- [x] 点击元素显示详细知识卡片（11条信息/元素）
- [x] 卡片在背景层展示，使用三栏布局避开中心圆盘
- [x] 支持点击按钮或ESC键关闭卡片
- [x] 五行元素图标高透明度（1.0/0.7）便于查看
- [x] 季节主题切换统一管理

### US-04: 伤寒论药材库
**作为** 中医爱好者
**我想要** 查询《伤寒论》常用药材
**以便** 学习药材的功效与应用

**验收标准**:
- [x] 收录18味《伤寒论》常用药材
- [x] 支持按名称、拼音、功效搜索
- [x] 按功能分类筛选（解表、清热、补气等）
- [x] 点击卡片显示详细信息（性味归经、用法用量、注意事项等）
- [x] 显示经典方剂和常配伍药材

### US-05: 个人中心
**作为** 用户
**我想要** 了解自己的体质并记录健康
**以便** 进行个性化养生

**验收标准**:
- [x] 体质辨识问卷（8题，覆盖9种体质）
- [x] 展示体质结果和养生建议
- [x] 健康记录功能（本地存储）
- [x] 当前季节的养生建议
- [x] 三个标签页：体质辨识、健康记录、节气养生
- [x] 季节主题切换与全站统一

---

## 功能需求

### 1. 季节主题系统

#### 1.1 自动季节检测
- 根据当前日期自动判断季节
- 支持24节气精确判断
- 默认为春季主题

#### 1.2 主题配置
| 季节 | 主色调 | 次色调 | 文字色 | 背景色 |
|------|--------|--------|--------|--------|
| 春 | #66C89A | #A8E6CF | #2D5A3D | #F0F9F4 |
| 夏 | #FF8C69 | #FFB6A3 | #8B3A3A | #FFF5F2 |
| 长夏 | #E8C547 | #F5DC76 | #8B6914 | #FFFCF5 |
| 秋 | #E8DCC8 | #F5F0E6 | #6B5D4F | #FFFCFA |
| 冬 | #4A6FA5 | #7DA5CA | #2C3E50 | #F0F5F9 |

#### 1.3 手动切换
- 导航栏季节选择器（下拉菜单）
- 切换后立即应用新主题
- 全站统一管理，无冲突
- 实时更新所有页面的主题色

#### 1.4 全局统一管理（v1.1新增）
- 所有页面统一使用script.js的季节系统
- 移除各页面重复的季节选择器代码
- 使用节点克隆清除旧事件监听器
- 添加调试日志便于问题排查

### 2. 五行交互系统

#### 2.1 圆形布局
- 五个元素均匀分布在圆周上（72°间隔）
- 圆盘缓慢旋转（60秒/圈）
- 元素内容反向旋转保持正立
- 元素图标高透明度显示（中心1.0，边缘0.7）

#### 2.2 关系可视化
- **相生线**: 虚线圆圈，顺时针流动动画
- **相克线**: 五角星形虚线连接

#### 2.3 中心提示按钮（v1.1新增）
- **初始状态**: 圆形按钮（80×80px），显示"👆 点击元素"
- **动画**: 脉冲动画（2秒循环），阴影扩散效果
- **点击元素后**: 变为"✕ 关闭"，停止脉冲动画
- **点击关闭**: 隐藏所有知识卡片，恢复提示按钮
- **颜色绑定**: 使用`var(--current-primary)`跟随主题色
- **z-index**: 200（最高层级，确保可点击）

#### 2.4 知识卡片布局（v1.1重构）
- **布局方式**: CSS Grid三栏布局
  - 左栏：1fr（显示左侧卡片）
  - 中栏：600px（圆盘区域，不显示卡片）
  - 右栏：1fr（显示右侧卡片）
- **卡片分配**:
  - 11条卡片（偶数10条）：左右各5条
  - 单数卡片（第11条）：放置在圆盘正下方
- **容器高度**: 600px（与圆盘等高），使用`justify-content: center`垂直居中
- **卡片样式**:
  - 半透明白色背景：`rgba(255, 255, 255, 0.85)`
  - 圆角：12px
  - 左边框：5px宽，使用五行元素主题色
  - 阴影：`0 2px 10px rgba(0, 0, 0, 0.05)`
  - 悬停效果：向上3px，增强阴影，透明度提升至0.25

#### 2.5 卡片内容
每个元素包含11条信息：
- 脏腑（1个）
- 情志（1个）
- 五味（1个）
- 窍（1个）
- 季节（1个）
- 五色（1个）
- 脉象（1个）
- 五畜（1个）
- 五谷（1个）
- 五果（1个）
- 五神（1个）

#### 2.6 交互流程
1. 页面加载显示旋转圆盘和中心提示按钮
2. 用户点击任意五行元素
3. 暂停圆盘旋转
4. 显示该元素的知识卡片（背景层展示）
5. 提示按钮变为"✕ 关闭"
6. 用户可：
   - 点击其他元素切换显示
   - 点击关闭按钮隐藏卡片
   - 按ESC键关闭
7. 卡片关闭后恢复圆盘旋转和提示按钮

### 3. 药材查询系统

#### 3.1 药材数据结构
```javascript
{
  id: 1,
  name: '麻黄',
  pinyin: 'Má Huáng',
  icon: '🌾',
  category: '解表',
  description: '发汗解表，宣肺平喘，利水消肿',
  properties: '辛、微苦，温',
  meridians: '肺、膀胱经',
  mainEffects: '发汗解表，宣肺平喘',
  usage: '用于风寒感冒，胸闷喘咳，风水浮肿',
  dosage: '2-9g',
  caution: '体虚自汗、盗汗者慎用',
  classics: '《伤寒论》：麻黄汤、麻杏石甘汤',
  combinations: ['桂枝', '杏仁', '石膏']
}
```

#### 3.2 搜索功能
- 实时搜索（输入时即时过滤）
- 搜索范围：名称、拼音、描述、功效
- 无结果时显示提示

#### 3.3 分类筛选
- 8个分类：全部、解表、清热、泻下、祛湿、温里、补气、补血
- 点击切换分类
- 当前分类高亮显示

#### 3.4 详情弹窗
- 完整信息展示
- 点击遮罩或ESC关闭
- 支持滚动查看长内容

### 4. 个人健康系统

#### 4.1 体质辨识
- **问卷设计**: 8道问题，每题2-5个选项
- **评分机制**: 每个选项对应不同体质的得分
- **体质类型**:
  1. 平和质（健康体质）
  2. 气虚质
  3. 阳虚质
  4. 阴虚质
  5. 痰湿质
  6. 湿热质
  7. 血瘀质
  8. 气郁质
  9. 特禀质

- **结果展示**:
  - 体质名称
  - 体质特征描述
  - 针对性养生建议
  - 结果保存到localStorage

#### 4.2 健康记录
- **记录内容**:
  - 日期（自动记录）
  - 标题（用户输入）
  - 内容（用户输入）

- **存储方式**: localStorage（本地浏览器存储）
- **功能**:
  - 添加记录（点击按钮，输入标题和内容）
  - 查看记录（列表展示）
  - 删除记录（点击卡片确认删除）
  - 按时间倒序排列

#### 4.3 节气养生
- **内容结构**:
  - 当前季节标题和图标
  - 起居建议
  - 饮食调养（包含推荐食物标签）
  - 运动养生
  - 经典方剂

- **数据**: 5个季节各自的完整建议
- **季节检测**: 使用script.js的getCurrentSeason()函数统一管理（v1.1更新）

---

## 技术架构

### 技术栈
- **前端**: 纯HTML5 + CSS3 + JavaScript (ES6+)
- **存储**: localStorage（浏览器本地存储）
- **兼容性**: 现代浏览器（Chrome, Firefox, Safari, Edge）

### 文件结构
```
个人网站2/
├── index.html          # 欢迎页
├── home.html           # 主页（季节主题）
├── wuxing.html         # 五行学说页面
├── yaocai.html         # 药材库页面
├── personal.html       # 个人中心页面
├── styles.css          # 全局样式
├── script.js           # 全局脚本（季节系统）✨ 统一管理
├── wuxing.js           # 五行页面脚本 ✨ 移除重复代码
├── yaocai.js           # 药材库页面脚本
├── personal.js         # 个人中心页面脚本 ✨ 移除重复代码
└── PRD.md             # 产品需求文档
```

### 核心技术实现

#### 1. CSS变量主题系统
```css
:root {
    --current-primary: var(--spring-primary);
    --current-secondary: var(--spring-secondary);
    --current-text: var(--spring-text);
    --current-bg: var(--spring-bg);
}

body {
    background-color: var(--current-bg);
    color: var(--current-text);
    transition: all 0.5s ease;
}
```

#### 2. 五行卡片三栏布局（v1.1新增）
```css
.knowledge-fullpage-container {
    display: grid;
    grid-template-columns: 1fr 600px 1fr;
    gap: 2rem;
    height: 600px;
}

.left-column, .right-column {
    display: flex;
    flex-direction: column;
    justify-content: center;  /* 垂直居中 */
    gap: 1.2rem;
}
```

#### 3. 中心提示按钮（v1.1新增）
```css
.click-hint {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 80px;
    height: 80px;
    border-radius: 50%;
    background: var(--current-primary);  /* 跟随主题 */
    z-index: 200;
    animation: hintPulse 2s ease-in-out infinite;
}

@keyframes hintPulse {
    0%, 100% {
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15), 0 0 0 0 var(--current-primary);
    }
    50% {
        box-shadow: 0 6px 30px rgba(0, 0, 0, 0.2), 0 0 0 15px transparent;
    }
}
```

#### 4. 反向旋转动画
```css
.wuxing-circle {
    animation: slowRotate 60s linear infinite;
}

.element-content-wrapper {
    animation: counterRotate 60s linear infinite;
}

@keyframes counterRotate {
    from { transform: rotate(360deg); }
    to { transform: rotate(0deg); }
}
```

#### 5. 季节检测逻辑
```javascript
function getCurrentSeason() {
    const month = new Date().getMonth() + 1;
    const day = new Date().getDate();

    // 基于24节气的精确判断
    // 返回对象: { season: 'spring', term: '立春后' }
}
```

#### 6. 事件监听器清理（v1.1新增）
```javascript
// 移除旧的事件监听器（如果有的话）
const newBtn = selectorBtn.cloneNode(true);
selectorBtn.parentNode.replaceChild(newBtn, selectorBtn);
```

---

## 设计规范

### 视觉风格
- **中国风**: 水墨元素、祥云装饰
- **简洁**: 留白充足，信息密度适中
- **柔和**: 圆角设计，渐变背景，阴影柔和

### 动效原则
- **平滑**: 所有动画使用ease缓动
- **快速**: 过渡时间0.3-0.5秒
- **有意义**: 动画服务于交互，不为动画而动画

### 响应式设计
- **断点**: 768px（移动设备）
- **适配**:
  - 导航栏折叠为菜单按钮
  - 卡片网格调整为单列
  - 圆盘尺寸缩小
  - 字体大小调整

### 可访问性
- **对比度**: 文字与背景对比度符合WCAG标准
- **点击区域**: 按钮最小44×44px
- **键盘导航**: 支持ESC关闭弹窗

---

## 用户旅程

### 场景1: 初次访问用户

1. **进入网站** (index.html)
   - 看到欢迎页插画
   - 阅读欢迎文字
   - 点击"开始探索"

2. **浏览主页** (home.html)
   - 查看当前季节主题
   - 了解季节养生原则
   - 浏览功能卡片

3. **探索五行** (wuxing.html)
   - 观察旋转的五行圆盘
   - 看到中心提示按钮"👆 点击元素"
   - 点击"木"元素
   - 阅读木相关的11条知识（左右分布，避开圆盘）
   - 点击中心"✕ 关闭"按钮或按ESC关闭
   - 继续点击其他元素学习

### 场景2: 学习药材知识

1. **进入药材库** (yaocai.html)
   - 浏览药材卡片网格
   - 使用搜索框查找"麻黄"
   - 查看麻黄详细信息
   - 点击"补气药"筛选
   - 学习人参、黄芪的功效

### 场景3: 体质辨识

1. **进入个人中心** (personal.html)
   - 点击"体质辨识"标签
   - 点击"开始体质测试"
   - 完成8道问卷
   - 查看体质结果（如：气虚质）
   - 阅读养生建议

2. **记录健康状态**
   - 切换到"健康记录"标签
   - 点击"添加健康记录"
   - 输入："今天感觉气短乏力"
   - 记录成功，显示在列表中

3. **查看节气养生**
   - 切换到"节气养生"标签
   - 查看当前季节（如：春季）的养生建议
   - 了解推荐食物和运动

### 场景4: 切换季节主题（v1.1新增）

1. **在任意页面**
   - 点击右上角季节选择器
   - 选择"夏季"
   - 页面立即切换为夏季主题（橙红色调）
   - 导航栏渐变同步更新
   - 五行页面提示按钮变为夏季色
   - 切换到其他页面，主题保持一致

---

## 路线图

### v1.0 (已完成) ✅
- [x] 欢迎页
- [x] 主页（季节主题）
- [x] 五行学说交互
- [x] 伤寒论药材库
- [x] 个人健康中心
- [x] 响应式设计
- [x] 季节主题系统

### v1.1 (已完成) ✅
- [x] 五行卡片布局重构（三栏布局，避开圆盘）
- [x] 中心提示按钮（引导交互+关闭功能）
- [x] 五行元素图标透明度优化
- [x] 季节选择器全站统一管理
- [x] 移除重复代码和冲突
- [x] 添加调试日志系统

### v1.2 (规划中)
- [ ] 增加更多药材（目标50味）
- [ ] 优化体质问卷（更精确的算法）
- [ ] 添加健康数据可视化
- [ ] 导出健康记录功能

### v2.0 (未来)
- [ ] 用户账户系统
- [ ] 云端数据同步
- [ ] AI养生助手
- [ ] 社区分享功能
- [ ] 移动端APP

---

## 设计决策记录

### D1: 为什么使用纯静态网站？
**决策**: 不使用后端服务器，纯前端实现
**原因**:
- 简单：无需配置服务器和数据库
- 快速：即开即用，无需注册登录
- 成本低：可部署到GitHub Pages等免费托管
- 隐私：数据存储在用户本地，不上传云端

### D2: 为什么知识卡片使用半透明设计？
**决策**: 卡片使用rgba(255, 255, 255, 0.85)半透明背景
**原因**:
- 保留背景装饰（水墨祥云）的可见性
- 增加视觉层次感
- 更符合中国风的美学
- 避免完全遮挡背景

### D3: 为什么五行圆盘要旋转？
**决策**: 五行圆盘60秒/圈缓慢旋转
**原因**:
- 象征五行相生的循环不息
- 增加视觉吸引力
- 反向旋转保持文字可读

### D4: 为什么只收录18味药材？
**决策**: v1.0只收录18味《伤寒论》常用药材
**原因**:
- 覆盖主要功能分类
- 保证质量而非数量
- 易于维护和扩展
- 满足初学者需求

### D5: 为什么卡片要使用三栏布局？（v1.1新增）
**决策**: 使用CSS Grid三栏布局（1fr 600px 1fr）而非全屏覆盖
**原因**:
- 用户明确要求"卡片在背景层展示，不是第三个图层"
- 避开中心圆盘区域，不遮挡主要内容
- 保留背景装饰（水墨祥云）的可见性
- 提供更好的视觉层次和空间感
- 更符合中国风留白美学

### D6: 为什么需要中心提示按钮？（v1.1新增）
**决策**: 在圆盘中心添加圆形提示按钮
**原因**:
- 引导用户发现交互功能（点击元素显示卡片）
- 提供明确的关闭方式（点击按钮或ESC）
- 减少用户困惑，提升可发现性
- 按钮颜色跟随主题，保持视觉一致性
- 脉冲动画吸引注意力，但不突兀

### D7: 为什么五行元素图标要提高透明度？（v1.1新增）
**决策**: 将图标透明度从0.8/0.4提升到1.0/0.7
**原因**:
- 用户反馈透明度太低，图标看不清楚
- 提升可读性和辨识度
- 保持视觉层次（中心亮、边缘暗）
- 不影响背景元素的可见性

### D8: 为什么全站要统一季节选择器？（v1.1新增）
**决策**: 移除各页面重复的季节选择器代码，统一使用script.js
**原因**:
- 避免代码重复和维护成本
- 消除事件监听器冲突
- 确保全站主题切换一致
- 简化问题排查（统一调试日志）
- 遵循DRY原则（Don't Repeat Yourself）

---

## 成功指标

### 用户参与度
- 平均停留时间 > 5分钟
- 页面浏览深度 > 3页
- 返回访客率 > 30%

### 功能使用率
- 五行页面交互率 > 80%
- 中心提示按钮点击率 > 70%
- 药材查询使用率 > 60%
- 体质测试完成率 > 70%
- 季节主题切换使用率 > 40%

### 用户满意度
- 视觉设计满意度 > 4.0/5.0
- 内容准确性认可度 > 4.5/5.0
- 推荐意愿 > 70%

### 技术指标（v1.1新增）
- 页面加载时间 < 2秒
- 主题切换响应时间 < 0.5秒
- 控制台错误数 = 0
- 跨浏览器兼容性 > 95%

---

## 风险与限制

### 技术风险
- **浏览器兼容性**: 旧版浏览器可能不支持CSS变量和动画
- **缓解措施**: 提供现代浏览器检测提示

### 数据风险
- **localStorage限制**: 数据仅存储在本地，清除浏览器数据会丢失
- **缓解措施**: v1.2将提供导出功能

### 内容风险
- **中医专业性**: 内容可能不够专业或存在偏差
- **缓解措施**: 添加免责声明，说明内容仅供参考

---

## 附录

### A. 参考资源
- 《伤寒论》原典
- 《中医基础理论》教材
- 《中医体质学》王琦教授
- 24节气查询网站

### B. 浏览器兼容性表
| 功能 | Chrome | Firefox | Safari | Edge |
|------|--------|---------|--------|------|
| CSS变量 | 49+ | 31+ | 9.1+ | 15+ |
| localStorage | 4+ | 3.5+ | 4+ | 8+ |
| ES6+ | 51+ | 54+ | 10+ | 15+ |
| CSS Grid | 57+ | 52+ | 10.1+ | 16+ |

### C. v1.1 更新日志
**日期**: 2026年01月30日

**新增功能**:
- ✨ 五行页面中心提示按钮（引导交互+关闭功能）
- ✨ 三栏卡片布局（避开圆盘，保留背景可见）

**优化改进**:
- 🎨 五行元素图标透明度提升（1.0/0.7）
- 🎨 卡片悬停效果优化（透明度、阴影、位移）
- 🔧 季节选择器全站统一管理
- 🔧 移除重复代码和函数冲突
- 🔧 添加调试日志系统

**问题修复**:
- 🐛 修复季节选择器在部分页面不生效的问题
- 🐛 修复personal.js和wuxing.js的函数冲突
- 🐛 修复事件监听器重复绑定问题

### D. 联系方式
- 产品经理: Lulu
- 项目代号: 个人中医养生网站 v1.1
- 创建日期: 2026年01月30日

---

**文档版本**: v1.1
**最后更新**: 2026年01月30日
